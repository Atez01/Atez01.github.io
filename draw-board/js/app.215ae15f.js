(function(e){function t(t){for(var r,s,o=t[0],c=t[1],u=t[2],h=0,d=[];h<o.length;h++)s=o[h],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/draw-board/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"083d":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],s=(n("5c0b"),n("2877")),o={},c=Object(s["a"])(o,a,i,!1,null,null,null),u=c.exports,l=n("8c4f"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home full-height"},[n("div",{staticClass:"container py-4 full-height"},[n("div",{staticClass:"row full-height"},[n("div",{staticClass:"col-8 full-height"},[n("div",{ref:"sketch",staticClass:"full-height"},[n("vue-p5",{on:{sketch:e.sketch}})],1)]),n("div",{staticClass:"col-4"},[n("h3",[e._v("Controls")]),n("small",[e._v("Click on canvas to move")]),n("Point",{staticClass:"my-2",attrs:{readonly:"",size:e.sketchSize},model:{value:e.p,callback:function(t){e.p=t},expression:"p"}},[e._v("P")]),n("Point",{staticClass:"my-2",attrs:{size:e.sketchSize},model:{value:e.left,callback:function(t){e.left=t},expression:"left"}},[e._v("Left motor")]),n("Point",{staticClass:"my-2",attrs:{size:e.sketchSize},model:{value:e.right,callback:function(t){e.right=t},expression:"right"}},[e._v("Right motor")]),n("div",{staticClass:"card card-body p-2"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v(" Left R "),n("span",{staticClass:"badge badge-primary"},[e._v(e._s(e.left.r.toFixed(2)))]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.left.r,expression:"left.r",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:e.maxR},domProps:{value:e.left.r},on:{__r:function(t){e.$set(e.left,"r",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),n("div",{staticClass:"col"},[e._v(" Right R "),n("span",{staticClass:"badge badge-primary"},[e._v(e._s(e.right.r.toFixed(2)))]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.right.r,expression:"right.r",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:e.maxR},domProps:{value:e.right.r},on:{__r:function(t){e.$set(e.right,"r",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])])]),n("div",{staticClass:"card card-body p-2 my-2"},[n("h6",[e._v("G-Code")]),n("small",[e._v("Only G1 command is supported")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.gcode,expression:"gcode"}],staticClass:"form-control",attrs:{rows:"10"},domProps:{value:e.gcode},on:{input:function(t){t.target.composing||(e.gcode=t.target.value)}}}),n("div",{staticClass:"row my-2"},[n("div",{staticClass:"col"},[n("a",{staticClass:"btn btn-primary full-width",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.startMovement(t)}}},[e._v("Draw")])]),n("div",{staticClass:"col"},[n("a",{staticClass:"btn btn-primary full-width",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.stopMovement(t)}}},[e._v("Stop")])])]),n("div",{staticClass:"row my-2"},[n("div",{staticClass:"col"},[e._v(" Move speed "),n("span",{staticClass:"badge badge-primary"},[e._v(e._s(e.moveSpeed))]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.moveSpeed,expression:"moveSpeed",modifiers:{number:!0}}],attrs:{type:"range",min:"100",max:"1000"},domProps:{value:e.moveSpeed},on:{__r:function(t){e.moveSpeed=e._n(t.target.value)},blur:function(t){return e.$forceUpdate()}}})])])])],1)])])])},d=[],p=(n("cb29"),n("caad"),n("d3b7"),n("4d63"),n("ac1f"),n("25f0"),n("2532"),n("466d"),n("1276"),n("ddb0"),n("1da1")),v=n("b85c"),f=n("5530"),m=(n("96cf"),n("d4ec")),g=n("bee2"),b=n("e25d"),x=n.n(b),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card card-body p-2"},[n("h6",[e._t("default")],2),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v(" X "),n("span",{staticClass:"badge badge-primary"},[e._v(e._s(e.value.x.toFixed(2)))]),e.readonly?e._e():n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.value.x,expression:"value.x",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:e.size.width,step:"1"},domProps:{value:e.value.x},on:{__r:function(t){e.$set(e.value,"x",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),n("div",{staticClass:"col"},[e._v(" Y "),n("span",{staticClass:"badge badge-primary"},[e._v(e._s(e.value.y.toFixed(2)))]),e.readonly?e._e():n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.value.y,expression:"value.y",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:e.size.height,step:"1"},domProps:{value:e.value.y},on:{__r:function(t){e.$set(e.value,"y",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])])])},w=[],_={name:"Point",props:{value:{type:Object,required:!0},size:{type:Object,required:!0},readonly:{type:Boolean,default:!1}},data:function(){return{actualValue:Object(f["a"])({},this.value)}},watch:{actualValue:function(){this.$emit("input",this.actualValue)}}},k=_,C=Object(s["a"])(k,y,w,!1,null,null,null),S=C.exports,G=n("2ef0"),O=n.n(G),M=10;function P(e,t){var n=R(e,t);return Math.sqrt(n.x*n.x+n.y*n.y)}function R(e,t){var n=t.x-e.x,r=t.y-e.y;return{x:n,y:r}}var j=function(){function e(t){Object(m["a"])(this,e),this._data=[],this._data.length=t,this._head=0}return Object(g["a"])(e,[{key:"last",value:function(){return this._data[(this._head-1)%this._data.length]}},{key:"push",value:function(e){this._data[this._head++%this._data.length]=e}},{key:"values",value:regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this._data.length)){e.next=9;break}if(n=this._data[(this._head+t)%this._data.length],void 0===n){e.next=6;break}return e.next=6,n;case 6:t++,e.next=1;break;case 9:case"end":return e.stop()}}),e,this)}))}]),e}(),z={name:"Home",components:{VueP5:x.a,Point:S},data:function(){return{left:{x:10,y:15,r:200},right:{x:450,y:30,r:380},sketchSize:{width:0,height:0},moveCircleRadius:50,gcode:"G1 X100 Y100 Z0\nG1 X200 Z1\nG1 Y200\nG1 X100\nG1 Y100\nG1 X100\n\nG1 X200 Y200 Z0\nG1 X300 Z1\nG1 Y300\nG1 X200\nG1 Y200\nG1 X200 Z0\n\nG1 X100 Y200 Z0\nG1 X200 Z1\nG1 Y300\nG1 X100\nG1 Y200\nG1 X100 Z0\n\nG1 X200 Y100 Z0\nG1 X300 Z1\nG1 Y200\nG1 X200\nG1 Y100\nG1 X200 Z0\n",moveSpeed:150,isRunningGcode:!1,isPenActive:!1}},computed:{maxR:function(){return P({x:0,y:0},{x:this.sketchSize.width,y:this.sketchSize.height})},p:function(){var e=this.left.r,t=this.right.r,n=this.left.x,r=this.left.y,a=this.right.x,i=this.right.y,s=P(this.left,this.right),o=(Math.pow(e,2)-Math.pow(t,2)+Math.pow(s,2))/(2*s),c=Math.sqrt(Math.pow(e,2)-Math.pow(o,2)),u=n+o*(a-n)/s,l=r+o*(i-r)/s,h=u-c*(i-r)/s,d=l+c*(a-n)/s;return{x:h,y:d}}},methods:{sketch:function(e){var t=this,n=new j(500),r=new j(500),a=function(t,n,r,a){var i=t.x,s=t.y,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:M,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";e.fill(n,r,a),u&&(e.noStroke(),e.text(u,i+.8*o,s+.8*o)),c?e.stroke(0):e.noStroke(),e.circle(i,s,o)},i=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;e.noFill(),e.stroke(r,a,i),e.circle(t.x,t.y,2*n)},s=function(t,n){e.noFill(),e.stroke(0),e.line(t.x,t.y,n.x,n.y)};e.setup=function(){t.sketchSize.width=t.$refs.sketch.clientWidth,t.sketchSize.height=t.$refs.sketch.clientHeight,e.resizeCanvas(t.sketchSize.width,t.sketchSize.height)},e.windowResized=function(){try{t.sketchSize.width=t.$refs.sketch.clientWidth,t.sketchSize.height=t.$refs.sketch.clientHeight,e.resizeCanvas(t.sketchSize.width,t.sketchSize.height)}catch(n){}},e.mouseClicked=function(){var n={x:e.mouseX,y:e.mouseY};n.x<=t.sketchSize.width&&n.x>=0&&n.y<=t.sketchSize.height&&n.y>=0&&t.moveTo(n,t.moveSpeed)},e.draw=function(){e.background(255),e.noFill(),e.stroke(0),e.rect(0,0,e.width,e.height),e.frameCount%5===0&&(O.a.isEqual(t.p,n.last())||n.push(Object(f["a"])({},t.p)),t.isRunningGcode&&(t.isPenActive?r.push(Object(f["a"])({},t.p)):r.push(null))),e.stroke(220),e.beginShape();var o,c=Object(v["a"])(n.values());try{for(c.s();!(o=c.n()).done;){var u=o.value;e.vertex(u.x,u.y)}}catch(p){c.e(p)}finally{c.f()}e.endShape(),e.stroke(255,100,100),e.beginShape();var l,h=Object(v["a"])(r.values());try{for(h.s();!(l=h.n()).done;){var d=l.value;null===d?(e.endShape(),e.beginShape()):e.vertex(d.x,d.y)}}catch(p){h.e(p)}finally{h.f()}e.endShape(),i(t.left,t.left.r),i(t.right,t.right.r),s(t.left,t.p),s(t.right,t.p),a(t.left,255,0,0,1.5*M,!0,"Left"),a(t.right,0,255,0,1.5*M,!0,"Right"),a(t.p,0,0,255,M,!0,"P")}},moveTo:function(e,t){var n=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){var a,i,s,o,c,u,l,h,d,p,v,f,m,g,b;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=P(n.p,e)/t*1e3,i=16,s=i/a,o=R(n.p,e),c=o.x,u=o.y,l=n.p.x,h=n.p.y,d=n.left.x,p=n.left.y,v=n.right.x,f=n.right.y,m=0;case 13:if(!(m<1)){r.next=23;break}return g=l+c*m,b=h+u*m,n.left.r=Math.sqrt(Math.pow(g-d,2)+Math.pow(b-p,2)),n.right.r=Math.sqrt(Math.pow(g-v,2)+Math.pow(b-f,2)),r.next=20,new Promise((function(e){return setTimeout(e,i)}));case 20:m+=s,r.next=13;break;case 23:case"end":return r.stop()}}),r)})))()},moveFunction:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var r,a,i,s,o,c,u,l,h,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=1e3,a=16,i=a/r,s=t.left.x,o=t.left.y,c=t.right.x,u=t.right.y,l=0;case 8:if(!(l<1)){n.next=18;break}return h=e.x(l),d=e.y(l),t.left.r=Math.sqrt(Math.pow(h-s,2)+Math.pow(d-o,2)),t.right.r=Math.sqrt(Math.pow(h-c,2)+Math.pow(d-u,2)),n.next=15,new Promise((function(e){return setTimeout(e,a)}));case 15:l+=i,n.next=8;break;case 18:case"end":return n.stop()}}),n)})))()},startMovement:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i,s,o,c,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isRunningGcode=!0,n={x:0,y:0},r=function(e,t){var n=e.match(RegExp("".concat(t,"([-+]?[0-9]*.?[0-9]+)")));return n&&2===n.length?parseFloat(n[1]):null},t.prev=3,a=Object(v["a"])(e.gcode.split("\n")),t.prev=5,a.s();case 7:if((i=a.n()).done){t.next=27;break}if(s=i.value,s&&!s.includes(";")){t.next=11;break}return t.abrupt("continue",25);case 11:if(o=parseInt(s.match(/G(\d+)/)[1]),1===o){t.next=14;break}throw Error("Unknown G command ".concat(o));case 14:return c=r(s,"Z"),null!==c&&(e.isPenActive=c>0),u=r(s,"X"),null!==u&&(n.x=u),l=r(s,"Y"),null!==l&&(n.y=l),t.next=22,e.moveTo(n,e.moveSpeed);case 22:if(e.isRunningGcode){t.next=25;break}return e.isPenActive=!1,t.abrupt("return");case 25:t.next=7;break;case 27:t.next=32;break;case 29:t.prev=29,t.t0=t["catch"](5),a.e(t.t0);case 32:return t.prev=32,a.f(),t.finish(32);case 35:t.next=40;break;case 37:t.prev=37,t.t1=t["catch"](3),console.error("Unsupported G-code:",t.t1);case 40:e.isPenActive=!1,e.isRunningGcode=!1;case 42:case"end":return t.stop()}}),t,null,[[3,37],[5,29,32,35]])})))()},stopMovement:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isRunningGcode=!1;case 1:case"end":return t.stop()}}),t)})))()}}},X=z,$=(n("f059"),Object(s["a"])(X,h,d,!1,null,"8fd4d852",null)),Y=$.exports;r["a"].use(l["a"]);var Z=[{path:"/",name:"Home",component:Y}],q=new l["a"]({mode:"history",base:"/draw-board/",routes:Z}),F=q,T=n("2f62");r["a"].use(T["a"]);var U=new T["a"].Store({state:{},mutations:{},actions:{},modules:{}});r["a"].config.productionTip=!1,new r["a"]({router:F,store:U,render:function(e){return e(u)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),a=n.n(r);a.a},"9c0c":function(e,t,n){},f059:function(e,t,n){"use strict";var r=n("083d"),a=n.n(r);a.a}});
//# sourceMappingURL=app.215ae15f.js.map