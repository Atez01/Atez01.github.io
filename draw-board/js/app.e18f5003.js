(function(e){function t(t){for(var n,s,o=t[0],c=t[1],u=t[2],h=0,d=[];h<o.length;h++)s=o[h],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/draw-board/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"26ae":function(e,t,r){},"54d9":function(e,t,r){"use strict";var n=r("26ae"),a=r.n(n);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},i=[],s=(r("5c0b"),r("2877")),o={},c=Object(s["a"])(o,a,i,!1,null,null,null),u=c.exports,l=r("8c4f"),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home full-height"},[r("div",{staticClass:"container py-4 full-height"},[r("div",{staticClass:"row full-height"},[r("div",{staticClass:"col-8 full-height"},[r("div",{ref:"sketch",staticClass:"full-height"},[r("vue-p5",{on:{sketch:e.sketch}})],1)]),r("div",{staticClass:"col-4"},[r("h3",[e._v("Controls")]),r("small",[e._v("Click on canvas to move")]),r("Point",{staticClass:"my-2",attrs:{readonly:"",size:e.sketchSize},model:{value:e.p,callback:function(t){e.p=t},expression:"p"}},[e._v("P")]),r("Point",{staticClass:"my-2",attrs:{size:e.sketchSize},model:{value:e.left,callback:function(t){e.left=t},expression:"left"}},[e._v("Left motor")]),r("Point",{staticClass:"my-2",attrs:{size:e.sketchSize},model:{value:e.right,callback:function(t){e.right=t},expression:"right"}},[e._v("Right motor")]),r("div",{staticClass:"card card-body p-2"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[e._v(" Left R "),r("span",{staticClass:"badge badge-primary"},[e._v(e._s(e.left.r.toFixed(2)))]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.left.r,expression:"left.r",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:e.maxR},domProps:{value:e.left.r},on:{__r:function(t){e.$set(e.left,"r",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),r("div",{staticClass:"col"},[e._v(" Right R "),r("span",{staticClass:"badge badge-primary"},[e._v(e._s(e.right.r.toFixed(2)))]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.right.r,expression:"right.r",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:e.maxR},domProps:{value:e.right.r},on:{__r:function(t){e.$set(e.right,"r",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])])]),r("div",{staticClass:"card card-body p-2 my-2"},[r("h6",[e._v("G-Code")]),r("small",[e._v("Only G1 command is supported")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.gcode,expression:"gcode"}],staticClass:"form-control",attrs:{rows:"10"},domProps:{value:e.gcode},on:{input:function(t){t.target.composing||(e.gcode=t.target.value)}}}),r("div",{staticClass:"row my-2"},[r("div",{staticClass:"col"},[r("a",{staticClass:"btn btn-primary full-width",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.startMovement(t)}}},[e._v("Draw")])]),r("div",{staticClass:"col"},[r("a",{staticClass:"btn btn-primary full-width",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.stopMovement(t)}}},[e._v("Stop")])])])])],1)])])])},d=[],f=(r("cb29"),r("caad"),r("d3b7"),r("ac1f"),r("2532"),r("466d"),r("1276"),r("ddb0"),r("1da1")),p=r("b85c"),v=r("5530"),m=(r("96cf"),r("d4ec")),g=r("bee2"),b=r("e25d"),x=r.n(b),y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card card-body p-2"},[r("h6",[e._t("default")],2),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[e._v(" X "),r("span",{staticClass:"badge badge-primary"},[e._v(e._s(e.value.x.toFixed(2)))]),e.readonly?e._e():r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.value.x,expression:"value.x",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:e.size.width,step:"1"},domProps:{value:e.value.x},on:{__r:function(t){e.$set(e.value,"x",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),r("div",{staticClass:"col"},[e._v(" Y "),r("span",{staticClass:"badge badge-primary"},[e._v(e._s(e.value.y.toFixed(2)))]),e.readonly?e._e():r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.value.y,expression:"value.y",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:e.size.height,step:"1"},domProps:{value:e.value.y},on:{__r:function(t){e.$set(e.value,"y",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])])])},w=[],k={name:"Point",props:{value:{type:Object,required:!0},size:{type:Object,required:!0},readonly:{type:Boolean,default:!1}},data:function(){return{actualValue:Object(v["a"])({},this.value)}},watch:{actualValue:function(){this.$emit("input",this.actualValue)}}},_=k,C=Object(s["a"])(_,y,w,!1,null,null,null),O=C.exports,M=r("2ef0"),j=r.n(M),z=10;function R(e,t){var r=S(e,t);return Math.sqrt(r.x*r.x+r.y*r.y)}function S(e,t){var r=t.x-e.x,n=t.y-e.y;return{x:r,y:n}}var P=function(){function e(t){Object(m["a"])(this,e),this._data=[],this._data.length=t,this._head=0}return Object(g["a"])(e,[{key:"last",value:function(){return this._data[(this._head-1)%this._data.length]}},{key:"push",value:function(e){this._data[this._head++%this._data.length]=e}},{key:"values",value:regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this._data.length)){e.next=9;break}if(r=this._data[(this._head+t)%this._data.length],void 0==r){e.next=6;break}return e.next=6,r;case 6:t++,e.next=1;break;case 9:case"end":return e.stop()}}),e,this)}))}]),e}(),$={name:"Home",components:{VueP5:x.a,Point:O},data:function(){return{left:{x:10,y:15,r:200},right:{x:450,y:30,r:380},sketchSize:{width:0,height:0},moveCircleRadius:50,gcode:"G1 X100 Y100\nG1 X200\nG1 Y200\nG1 X100\nG1 Y100\nG1 X100\n",isRunningGcode:!1}},computed:{maxR:function(){return R({x:0,y:0},{x:this.sketchSize.width,y:this.sketchSize.height})},p:function(){var e=this.left.r,t=this.right.r,r=this.left.x,n=this.left.y,a=this.right.x,i=this.right.y,s=R(this.left,this.right),o=(Math.pow(e,2)-Math.pow(t,2)+Math.pow(s,2))/(2*s),c=Math.sqrt(Math.pow(e,2)-Math.pow(o,2)),u=r+o*(a-r)/s,l=n+o*(i-n)/s,h=u-c*(i-n)/s,d=l+c*(a-r)/s;return{x:h,y:d}}},methods:{sketch:function(e){var t=this,r=new P(200),n=function(t,r,n,a){var i=t.x,s=t.y,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:z,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";e.fill(r,n,a),u&&(e.noStroke(),e.text(u,i+.8*o,s+.8*o)),c?e.stroke(0):e.noStroke(),e.circle(i,s,o)},a=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;e.noFill(),e.stroke(n,a,i),e.circle(t.x,t.y,2*r)},i=function(t,r){e.noFill(),e.stroke(0),e.line(t.x,t.y,r.x,r.y)};e.setup=function(){t.sketchSize.width=t.$refs.sketch.clientWidth,t.sketchSize.height=t.$refs.sketch.clientHeight,e.resizeCanvas(t.sketchSize.width,t.sketchSize.height)},e.windowResized=function(){try{t.sketchSize.width=t.$refs.sketch.clientWidth,t.sketchSize.height=t.$refs.sketch.clientHeight,e.resizeCanvas(t.sketchSize.width,t.sketchSize.height)}catch(r){}},e.mouseClicked=function(){var r={x:e.mouseX,y:e.mouseY};r.x<=t.sketchSize.width&&r.x>=0&&r.y<=t.sketchSize.height&&r.y>=0&&t.moveTo(r,300)},e.draw=function(){e.background(255),e.noFill(),e.stroke(0),e.rect(0,0,e.width,e.height),j.a.isEqual(t.p,r.last())||e.frameCount%5!==0||r.push(Object(v["a"])({},t.p));var s,o=Object(p["a"])(r.values());try{for(o.s();!(s=o.n()).done;){var c=s.value;n(c,100,100,100,3,!1)}}catch(u){o.e(u)}finally{o.f()}a(t.left,t.left.r),a(t.right,t.right.r),i(t.left,t.p),i(t.right,t.p),n(t.left,255,0,0,1.5*z,!0,"Left"),n(t.right,0,255,0,1.5*z,!0,"Right"),n(t.p,0,0,255,z,!0,"P")}},moveTo:function(e,t){var r=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var a,i,s,o,c,u,l,h,d,f,p,v,m,g,b;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=R(r.p,e)/t*1e3,i=16,s=i/a,o=S(r.p,e),c=o.x,u=o.y,l=r.p.x,h=r.p.y,d=r.left.x,f=r.left.y,p=r.right.x,v=r.right.y,m=0;case 13:if(!(m<1)){n.next=23;break}return g=l+c*m,b=h+u*m,r.left.r=Math.sqrt(Math.pow(g-d,2)+Math.pow(b-f,2)),r.right.r=Math.sqrt(Math.pow(g-p,2)+Math.pow(b-v,2)),n.next=20,new Promise((function(e){return setTimeout(e,i)}));case 20:m+=s,n.next=13;break;case 23:case"end":return n.stop()}}),n)})))()},moveFunction:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){var n,a,i,s,o,c,u,l,h,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=1e3,a=16,i=a/n,s=t.left.x,o=t.left.y,c=t.right.x,u=t.right.y,l=0;case 8:if(!(l<1)){r.next=18;break}return h=e.x(l),d=e.y(l),t.left.r=Math.sqrt(Math.pow(h-s,2)+Math.pow(d-o,2)),t.right.r=Math.sqrt(Math.pow(h-c,2)+Math.pow(d-u,2)),r.next=15,new Promise((function(e){return setTimeout(e,a)}));case 15:l+=i,r.next=8;break;case 18:case"end":return r.stop()}}),r)})))()},startMovement:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,s,o,c,u,l,h,d,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isRunningGcode=!0,r=100,n={x:0,y:0},a=[n],t.prev=4,i=Object(p["a"])(e.gcode.split("\n")),t.prev=6,i.s();case 8:if((s=i.n()).done){t.next=22;break}if(o=s.value,o&&!o.includes(";")){t.next=12;break}return t.abrupt("continue",20);case 12:if(c=parseInt(o.match(/G(\d+)/)[1]),1===c){t.next=15;break}throw Error("Unknown G command ".concat(c));case 15:u=o.match(/X([-+]?[0-9]*\.?[0-9]+)/),l=o.match(/Y([-+]?[0-9]*\.?[0-9]+)/),u&&2===u.length&&(n.x=parseFloat(u[1])),l&&2===l.length&&(n.y=parseFloat(l[1])),a.push(Object(v["a"])({},n));case 20:t.next=8;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](6),i.e(t.t0);case 27:return t.prev=27,i.f(),t.finish(27);case 30:h=0,d=a;case 31:if(!(h<d.length)){t.next=40;break}return f=d[h],t.next=35,e.moveTo(f,r);case 35:if(e.isRunningGcode){t.next=37;break}return t.abrupt("return");case 37:h++,t.next=31;break;case 40:t.next=45;break;case 42:t.prev=42,t.t1=t["catch"](4),console.error("Unsupported G-code:",t.t1);case 45:e.isRunningGcode=!1;case 46:case"end":return t.stop()}}),t,null,[[4,42],[6,24,27,30]])})))()},stopMovement:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isRunningGcode=!1;case 1:case"end":return t.stop()}}),t)})))()}}},G=$,F=(r("54d9"),Object(s["a"])(G,h,d,!1,null,"4f61db3e",null)),q=F.exports;n["a"].use(l["a"]);var T=[{path:"/",name:"Home",component:q}],X=new l["a"]({mode:"history",base:"/draw-board/",routes:T}),U=X,Y=r("2f62");n["a"].use(Y["a"]);var E=new Y["a"].Store({state:{},mutations:{},actions:{},modules:{}});n["a"].config.productionTip=!1,new n["a"]({router:U,store:E,render:function(e){return e(u)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var n=r("9c0c"),a=r.n(n);a.a},"9c0c":function(e,t,r){}});
//# sourceMappingURL=app.e18f5003.js.map